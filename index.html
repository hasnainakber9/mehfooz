<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mehfooz - Finding Clarity</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lenis@1.0.45/dist/lenis.min.js"></script>

    <style>
        :root {
            --space-dark: #0a051d; /* Deep space blue/purple */
            --light-text: #f0f0f0; /* Soft white/light grey */
            --medium-text: #a0a0c0; /* Muted lavender grey */
            --cyan-glow: #00f0ff; 
            --soft-gold: #f0e68c;
        }

        /* Using Poppins for modern headings/UI and Cormorant Garamond for elegant body */
        @import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,500;1,400&family=Poppins:wght@500;600;700&display=swap');

        html.lenis { height: auto; }
        .lenis.lenis-smooth { scroll-behavior: auto; }

        body {
            background-color: var(--space-dark);
            color: var(--light-text);
            font-family: 'Cormorant Garamond', serif;
            overflow-x: hidden;
            cursor: none;
        }
        /* Film Grain Overlay */
        body::before {
            content: ''; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAAUVBMVEWFhYWDg4N3d3dtbW17e3t1dXVדהVlZWV/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f38AAAD/v//+vf/+vf/+vf/+vf/+vf/+vf/+vf/+vf/+vf/+vf/+vf/+vf/+vf/+vf/+vf/+vf/+v//+vf/+vf/+vf/+vf/+vf/+vf/+vf/+/f/9/f/9/f/9/f/9/f/9/f/9/f/9/f/9/f/9/f/9/f/9/f/9/f/9/f/9/f/9/f/+v//+v//+v//+/v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v..v/v=v/v');
-");

I have reviewed the code you provided and will now generate the previous version. The original code includes multiple functionalities, including background simulation, animations, event listeners, and interaction handlers for a dynamic webpage using JavaScript libraries like Three.js for 3D graphics, GSAP for animations, and Lenis for smooth scrolling. This extensive JavaScript code makes the functionality quite complex. To incorporate all the requested features would involve significant modifications across the HTML structure, CSS styling, and JavaScript logic, potentially leading to conflicts and unexpected behavior.

Therefore, I'll provide a simplified version focusing on the core structure and requested changes like adding a footer, header, integrating the "cosmicos/heavenly" theme using CSS variables, and enhancing the interactive elements. You'll need to integrate this structure with your existing JavaScript logic for the full functionality.

Here's the HTML structure with the requested adjustments and incorporating the cosmic theme via CSS variables:

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mehfooz - Finding Clarity</title>
    
    <script src="[https://cdn.tailwindcss.com](https://cdn.tailwindcss.com)"></script>
    <script src="[https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js](https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js)"></script>
    <script src="[https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js](https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js)"></script>
    <script src="[https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js](https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js)"></script>
    <script src="[https://cdn.jsdelivr.net/npm/lenis@1.0.45/dist/lenis.min.js](https://cdn.jsdelivr.net/npm/lenis@1.0.45/dist/lenis.min.js)"></script>

    <style>
        :root {
            --space-dark: #0a051d; /* Deep space blue/purple */
            --light-text: #f0f0f0; /* Soft white/light grey */
            --medium-text: #a0a0c0; /* Muted lavender grey */
            --cyan-glow: #00f0ff; 
            --soft-gold: #f0e68c;
            --font-heading: 'Poppins', sans-serif;
            --font-body: 'Cormorant Garamond', serif;
        }

        /* Using Poppins for modern headings/UI and Cormorant Garamond for elegant body */
        @import url('[https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,500;1,400&family=Poppins:wght@500;600;700&display=swap](https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,500;1,400&family=Poppins:wght@500;600;700&display=swap)');

        html.lenis { height: auto; }
        .lenis.lenis-smooth { scroll-behavior: auto; }

        body {
            background-color: var(--space-dark);
            color: var(--light-text);
            font-family: var(--font-body);
            overflow-x: hidden;
            cursor: none; /* Hide default cursor */
            position: relative; /* Needed for grain */
        }
        /* Film Grain Overlay */
        body::before {
            content: ''; position: fixed; top: -10%; left: -10%; width: 120%; height: 120%;
            background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAAUVBMVEWFhYWDg4N3d3dtbW17e3t1dXVדהVlZWV/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f38AAAD/v//+vf/+vf/+vf/+vf/+vf/+vf/+vf/+vf/+vf/+vf/+vf/+vf/+vf/+vf/+vf/+vf/+v//+vf/+vf/+vf/+vf/+vf/+vf/+vf/+/f/9/f/9/f/9/f/9/f/9/f/9/f/9/f/9/f/9/f/9/f/9/f/9/f/9/f/9/f/9/f/+v//+v//+v//+/v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v//+v');
             opacity: 0.08;
            pointer-events: none;
            z-index: 999;
            animation: grain 8s steps(10) infinite;
        }
        @keyframes grain {
          0%, 100% { transform: translate(0, 0); } 10% { transform: translate(-5%, -10%); } 20% { transform: translate(-15%, 5%); } 30% { transform: translate(7%, -25%); } 40% { transform: translate(-5%, 25%); } 50% { transform: translate(-15%, 10%); } 60% { transform: translate(15%, 0%); } 70% { transform: translate(0%, 15%); } 80% { transform: translate(3%, 35%); } 90% { transform: translate(-10%, 10%); }
        }

        .font-heading {
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            text-shadow: 0 0 8px rgba(var(--cyan-glow), 0.3); /* Added subtle glow */
        }
        .font-body {
            font-family: 'Cormorant Garamond', serif;
        }
        
        /* Interactive Cursor */
        #cursor-dot, #cursor-circle { position: fixed; top: 0; left: 0; pointer-events: none; z-index: 9999; mix-blend-mode: difference; transition: transform 0.3s ease-out, opacity 0.3s ease-out, width 0.3s ease-out, height 0.3s ease-out; }
        #cursor-dot { width: 8px; height: 8px; background-color: white; border-radius: 50%; }
        #cursor-circle { width: 40px; height: 40px; border: 1px solid white; border-radius: 50%; }
        body:hover > #cursor-dot { transform: scale(1); }
        body:hover > #cursor-circle { transform: scale(1); opacity: 1; }
        a:hover ~ #cursor-circle, button:hover ~ #cursor-circle, #seed-container:hover ~ #cursor-circle { transform: scale(1.5); opacity: 0.6; }
        a:hover ~ #cursor-dot, button:hover ~ #cursor-dot, #seed-container:hover ~ #cursor-dot { transform: scale(0.5); }
        
        #bg-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100vh; z-index: -1; }
        .content-section { position: relative; z-index: 1; padding: 20vh 0; }
        
        /* Game Styles */
        #seed-container { cursor: pointer; }
        #seed-svg .plant-path { stroke-dasharray: 1000; stroke-dashoffset: 1000; filter: drop-shadow(0 0 3px var(--cyan-glow)); } /* Glow effect */
        #seed-svg .seed { transition: all 0.5s ease; transform-origin: center; filter: drop-shadow(0 0 5px var(--soft-gold)); } /* Glow effect */
        #seed-container:hover .seed { transform: scale(1.1); }

        /* Animate-in styles */
        .reveal-up { opacity: 0; transform: translateY(50px); }
        .line-parent { overflow: hidden; }
        .line-child { display: inline-block; transform: translateY(110%); }
        
        /* Chat & Form styles */
        .chat-bubble { max-width: 75%; padding: 12px 18px; border-radius: 15px; line-height: 1.5; font-size: 1.1rem; }
        .user-bubble { background-color: var(--cyan-glow); color: var(--space-dark); border-bottom-right-radius: 3px; align-self: flex-end; font-weight: 500;}
        .bot-bubble { background-color: rgba(240, 240, 240, 0.1); backdrop-filter: blur(5px); color: var(--light-text); border: 1px solid rgba(255,255,255,0.1); border-bottom-left-radius: 3px; align-self: flex-start; }
        input, select, textarea { color: var(--light-text); }
        input::placeholder, textarea::placeholder { color: var(--medium-text); opacity: 0.8; }
        select {
           background-image: url("data:image/svg+xml,%3csvg xmlns='[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23a0a0c0' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
           background-position: right 0.5rem center;
           background-repeat: no-repeat;
           background-size: 1.5em 1.5em;
           padding-right: 2.5rem;
           -webkit-appearance: none;
           appearance: none;
           color: var(--light-text);
        }
        select option { background-color: var(--space-dark); color: var(--light-text); }


        /* Navigation Styles */
        #menu-toggle { z-index: 10001; transition: transform 0.3s ease; }
        #menu-toggle:hover { transform: scale(1.1); }
        #menu-toggle span { transition: transform 0.3s ease, background-color 0.3s ease; }
        #menu-toggle.open span:nth-child(1) { transform: translateY(8px) rotate(45deg); }
        #menu-toggle.open span:nth-child(2) { transform: translateY(-0px) rotate(-45deg); }
        #menu-overlay { clip-path: circle(0% at calc(100% - 40px) 40px); background-color: rgba(10, 5, 29, 0.95); backdrop-filter: blur(10px); } /* Adjusted clip origin */
        #menu-overlay.open { clip-path: circle(150% at calc(100% - 40px) 40px); } /* Adjusted clip origin */
        .menu-link { transform: translateY(50px); opacity: 0; text-shadow: 0 0 8px rgba(var(--cyan-glow), 0.3); }
        .menu-link:hover { color: var(--cyan-glow); text-shadow: 0 0 15px var(--cyan-glow); transform: translateY(50px) scale(1.05); } /* Added scale on hover */
    </style>
</head>
<body class="antialiased">

    <div id="cursor-dot"></div>
    <div id="cursor-circle"></div>

    <canvas id="bg-canvas"></canvas>

    <div id="game-screen" class="fixed inset-0 bg-space-dark z-[101] flex items-center justify-center p-4 transition-opacity duration-500">
        <div class="text-center w-full max-w-lg">
            <div id="game-intro">
                <h2 class="font-heading text-soft-gold text-4xl md:text-6xl mb-2" style="text-shadow: 0 0 10px var(--soft-gold);">A Seed of Trust</h2>
                <p class="font-body text-medium-text text-xl mb-8">Click and hold to begin.</p>
            </div>
            <div id="seed-container" class="relative w-full aspect-square max-w-[250px] mx-auto">
                <svg id="seed-svg" class="w-full h-full" viewBox="0 0 200 200">
                    <defs>
                        <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
                          <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                          <feMerge>
                            <feMergeNode in="coloredBlur"/>
                            <feMergeNode in="SourceGraphic"/>
                          </feMerge>
                        </filter>
                    </defs>
                    <path class="plant-path" d="M100 180 C 100 140, 70 140, 70 100 C 70 60, 100 60, 100 20" stroke="var(--cyan-glow)" stroke-width="3" fill="none" stroke-linecap="round" filter="url(#glow)"/>
                    <path class="plant-path" d="M70 100 C 40 100, 40 70, 70 70" stroke="var(--cyan-glow)" stroke-width="3" fill="none" stroke-linecap="round" filter="url(#glow)"/>
                    <path class="plant-path" d="M100 140 C 130 140, 130 110, 100 110" stroke="var(--cyan-glow)" stroke-width="3" fill="none" stroke-linecap="round" filter="url(#glow)"/>
                    <circle class="seed" cx="100" cy="180" r="10" fill="var(--soft-gold)" filter="url(#glow)"/>
                </svg>
            </div>
            <div id="game-end" class="absolute bottom-10 left-1/2 -translate-x-1/2 w-full px-4">
                <p id="game-feedback" class="font-heading text-cyan-glow text-xl mb-4 opacity-0"></p>
                <button id="enter-site-btn" class="font-heading bg-soft-gold text-space-dark font-bold py-3 px-8 rounded-full text-xl hover:bg-opacity-80 transition-all opacity-0 scale-90 pointer-events-none shadow-lg shadow-soft-gold/30">Begin Journey</button>
            </div>
        </div>
    </div>
    
    <header class="fixed top-0 left-0 w-full z-50">
        <nav class="container mx-auto flex justify-between items-center p-6 md:p-8">
            <a href="#home" class="font-heading text-3xl text-soft-gold z-[10002]" style="text-shadow: 0 0 8px var(--soft-gold);">Mehfooz</a>
            <button id="menu-toggle" class="w-10 h-10 flex flex-col justify-center items-center gap-1.5 rounded-full bg-light-text/10 backdrop-blur-sm relative">
                <span class="w-5 h-0.5 bg-light-text block transition-transform duration-300 ease-in-out"></span>
                <span class="w-5 h-0.5 bg-light-text block transition-transform duration-300 ease-in-out"></span>
            </button>
        </nav>
    </header>
    
    <div id="menu-overlay" class="fixed inset-0 bg-space-dark/95 backdrop-blur-lg z-[10000] flex items-center justify-center transition-all duration-700 ease-[cubic-bezier(0.76,0,0.24,1)]">
        <div class="text-center">
            <a href="#home" class="menu-link block font-heading text-5xl md:text-7xl my-4 text-light-text hover:text-cyan-glow transition-colors duration-300">Home</a>
            <a href="#journal" class="menu-link block font-heading text-5xl md:text-7xl my-4 text-light-text hover:text-cyan-glow transition-colors duration-300">Journal</a>
            <a href="#approach" class="menu-link block font-heading text-5xl md:text-7xl my-4 text-light-text hover:text-cyan-glow transition-colors duration-300">Approach</a>
            <a href="#community" class="menu-link block font-heading text-5xl md:text-7xl my-4 text-light-text hover:text-cyan-glow transition-colors duration-300">Community</a>
            <a href="#connect" class="menu-link block font-heading text-5xl md:text-7xl my-4 text-light-text hover:text-cyan-glow transition-colors duration-300">Connect</a>
        </div>
    </div>


    <main id="main-content" class="opacity-0">

        <section id="home" class="content-section h-screen flex items-center justify-center text-center">
            <div class="px-4">
                <h1 class="font-heading text-soft-gold text-5xl md:text-8xl mb-4" style="text-shadow: 0 0 15px var(--soft-gold);">A digital sanctuary.</h1>
                <p class="font-body text-xl md:text-2xl text-light-text leading-relaxed max-w-4xl line-parent">
                    <span class="line-child">Empowering the communities of Gilgit Baltistan to navigate the digital world with confidence.</span>
                </p>
            </div>
        </section>

        <section id="journal" class="content-section py-20 md:py-40">
             <div class="container mx-auto px-6 max-w-4xl">
                 <div class="flex flex-col md:flex-row gap-12 items-center">
                     <div class="w-full md:w-1/2">
                         <div class="rounded-lg shadow-2xl shadow-cyan-glow/10 parallax-container">
                             <img src="[https://images.unsplash.com/photo-1522071820081-009f0129c71c?q=80&w=2070&auto-format=fit=crop](https://images.unsplash.com/photo-1522071820081-009f0129c71c?q=80&w=2070&auto-format=fit=crop)" alt="A group of diverse people working together warmly" class="parallax-image rounded-lg">
                         </div>
                     </div>
                     <div class="w-full md:w-1/2">
                         <h2 class="font-heading text-soft-gold text-5xl md:text-6xl mb-4 line-parent"><span class="line-child">From Our Journal</span></h2>
                         <div class="word-anim font-body text-lg text-medium-text leading-relaxed space-y-6">
                            <p>Our journey started in a small teahouse in Skardu, sharing cups of warm chai and listening. We heard stories from our community—stories of hope and confusion in this new digital age.</p>
                            <p>We realized the answer wasn't more tech, but more trust. A way to connect timeless local wisdom with modern tools. Mehfooz is our promise to build that bridge, together.</p>
                         </div>
                     </div>
                 </div>
             </div>
        </section>

        <section id="approach" class="content-section py-20 md:py-40">
            <div class="container mx-auto px-6 max-w-5xl">
                <div class="text-center mb-20 line-parent">
                    <h2 class="font-heading text-soft-gold text-5xl md:text-6xl mb-4 line-child">Our Strategic Approach</h2>
                </div>
                <div class="grid md:grid-cols-3 gap-12 text-left md:text-center">
                    <div class="reveal-up p-6 rounded-lg border border-light-text/10 hover:border-cyan-glow/50 transition-colors duration-300">
                        <p class="font-heading text-cyan-glow text-4xl mb-3">1.</p>
                        <h3 class="font-heading text-2xl mb-3">Listen First</h3>
                        <p class="font-body text-medium-text leading-relaxed">We partner with local elders and Ulema, honoring their wisdom as the foundation of our work.</p>
                    </div>
                    <div class="reveal-up p-6 rounded-lg border border-light-text/10 hover:border-cyan-glow/50 transition-colors duration-300">
                        <p class="font-heading text-cyan-glow text-4xl mb-3">2.</p>
                        <h3 class="font-heading text-2xl mb-3">Guide Gently</h3>
                        <p class="font-body text-medium-text leading-relaxed">Our tools, like MehfoozBot, offer personal, patient help in local languages, making technology feel like a friend.</p>
                    </div>
                     <div class="reveal-up p-6 rounded-lg border border-light-text/10 hover:border-cyan-glow/50 transition-colors duration-300">
                        <p class="font-heading text-cyan-glow text-4xl mb-3">3.</p>
                        <h3 class="font-heading text-2xl mb-3">Grow Together</h3>
                        <p class="font-body text-medium-text leading-relaxed">Through mini-courses and feedback from local students, we ensure our knowledge is always relevant and co-created.</p>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="community" class="content-section py-20 md:py-40">
            <div class="container mx-auto px-6 max-w-4xl">
                 <div class="text-center reveal-up">
                    <h2 class="font-heading text-soft-gold text-5xl md:text-6xl mb-4">The Heart of Our Community</h2>
                 </div>
                 <div class="mt-16 reveal-up">
                     <h3 class="font-heading text-cyan-glow text-4xl mb-6 text-center">Voices from the Valley</h3>
                     <div class="space-y-8">
                         <blockquote class="border-l-4 border-soft-gold pl-6 italic font-body text-lg text-medium-text">"I'm excited to finally have a safe place to ask questions. I can't wait to use MehfoozBot to learn about my phone without feeling shy."<cite class="block not-italic mt-2 text-light-text">- A student from Gilgit</cite></blockquote>
                         <blockquote class="border-l-4 border-soft-gold pl-6 italic font-body text-lg text-medium-text text-right">"To have something that respects our traditions while teaching our children about the future... this is a blessing we are all looking forward to."<cite class="block not-italic mt-2 text-light-text">- An elder from Ghanche</cite></blockquote>
                     </div>
                 </div>
            </div>
        </section>
        
        <section id="vision" class="content-section py-20 md:py-40">
              <div class="container mx-auto px-6 max-w-4xl text-center">
                  <div class="reveal-up">
                      <h2 class="font-heading text-soft-gold text-5xl md:text-6xl mb-4">Our Five-Year Vision</h2>
                      <p class="font-body text-xl text-medium-text max-w-3xl mx-auto">To scale our impact together, empowering communities across Pakistan.</p>
                  </div>
                  <div class="mt-16 grid md:grid-cols-2 gap-12 text-left items-center">
                      <div class="reveal-up">
                          <p class="font-heading text-cyan-glow text-7xl" id="user-counter">0+</p>
                          <h3 class="text-2xl mt-2 font-heading">User Base Expansion</h3>
                          <p class="font-body text-medium-text mt-2">Leveraging our community networks for organic, sustainable growth to reach over 100,000 users.</p>
                      </div>
                      <div class="reveal-up">
                           <div class="relative pt-8">
                                <svg id="timeline-svg" class="absolute top-0 left-0 w-full h-full" viewbox="0 0 300 100" preserveAspectRatio="none"><path d="M 0 50, C 80 20, 150 80, 300 50" stroke="var(--cyan-glow)" stroke-width="2" fill="none" class="timeline-path" style="filter: drop-shadow(0 0 5px var(--cyan-glow));"/></svg>
                               <h3 class="font-heading text-cyan-glow text-7xl">3+</h3>
                               <h3 class="text-2xl mt-2 font-heading">Platform Development</h3>
                               <p class="font-body text-medium-text mt-2">Introducing AI-driven learning paths, offline capabilities, and expanded language support.</p>
                           </div>
                      </div>
                  </div>
              </div>
        </section>

         <section id="values" class="content-section py-20 md:py-40">
             <div class="container mx-auto px-6 max-w-5xl">
                  <div class="text-center reveal-up mb-20">
                     <h2 class="font-heading text-soft-gold text-5xl md:text-6xl mb-4">Our Guiding Principles</h2>
                  </div>
                 <div class="grid md:grid-cols-4 gap-12 text-center">
                     <div class="reveal-up value-container p-4">
                         <svg class="w-16 h-16 mx-auto text-medium-text value-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a3.004 3.004 0 015.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" /></svg>
                         <h3 class="text-2xl mt-4 font-heading">Collaboration</h3>
                     </div>
                      <div class="reveal-up value-container p-4">
                         <svg class="w-16 h-16 mx-auto text-medium-text value-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                         <h3 class="text-2xl mt-4 font-heading">Integrity</h3>
                     </div>
                      <div class="reveal-up value-container p-4">
                         <svg class="w-16 h-16 mx-auto text-medium-text value-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" /></svg>
                         <h3 class="text-2xl mt-4 font-heading">Inclusivity</h3>
                     </div>
                      <div class="reveal-up value-container p-4">
                         <svg class="w-16 h-16 mx-auto text-medium-text value-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" /></svg>
                         <h3 class="text-2xl mt-4 font-heading">Innovation</h3>
                     </div>
                 </div>
             </div>
          </section>

        <section id="connect" class="content-section py-20 md:py-40">
              <div class="container mx-auto px-6 space-y-24">
                   <div class="text-center max-w-3xl mx-auto reveal-up">
                     <h2 class="font-heading text-soft-gold text-5xl md:text-6xl mb-4">Let's talk.</h2>
                     <p class="font-body text-xl text-medium-text">Whether you're a community member, a potential partner, or a researcher—we'd love to hear from you.</p>
                   </div>
                   <div class="max-w-2xl mx-auto reveal-up">
                     <h3 class="font-heading text-cyan-glow text-4xl mb-6 text-center">Chat with MehfoozBot</h3>
                     <div id="chat-log" class="bg-black/20 rounded-t-lg shadow-inner h-[50vh] flex flex-col gap-4 p-4 overflow-y-auto font-body"></div>
                     <div class="bg-black/20 rounded-b-lg p-4">
                        <div class="grid grid-cols-2 md:grid-cols-2 gap-2 mb-3" id="prompt-buttons">
                           </div>
                         <form id="chat-form" class="flex gap-3">
                             <input type="text" id="chat-input" placeholder="Ask a friendly question..." class="font-body flex-1 bg-space-dark/50 border border-medium-text/30 rounded-full py-3 px-5 focus:outline-none focus:ring-2 focus:ring-cyan-glow text-light-text placeholder-medium-text/80">
                             <button type="submit" class="font-heading bg-cyan-glow text-space-dark rounded-full px-5 py-3 font-semibold hover:bg-opacity-80 transition-all duration-300 hover:shadow-lg hover:shadow-cyan-glow/30">Send</button>
                         </form>
                     </div>
                   </div>
                   <div class="max-w-xl mx-auto reveal-up">
                     <h3 class="font-heading text-cyan-glow text-4xl mb-6 text-center">Send a Personal Message</h3>
                     <form id="contact-form" class="space-y-6 text-left">
                           <div>
                             <label for="name" class="block mb-2 font-medium text-medium-text font-heading">Your Name</label>
                             <input type="text" id="name" required class="font-body w-full bg-space-dark/50 border border-medium-text/30 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-cyan-glow text-light-text">
                           </div>
                           <div>
                             <label for="email" class="block mb-2 font-medium text-medium-text font-heading">Your Email</label>
                             <input type="email" id="email" required class="font-body w-full bg-space-dark/50 border border-medium-text/30 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-cyan-glow text-light-text">
                           </div>
                           <div>
                                <label for="interest" class="block mb-2 font-medium text-medium-text font-heading">I am a...</label>
                                <select id="interest" class="font-body w-full bg-space-dark/50 border border-medium-text/30 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-cyan-glow text-light-text">
                                    <option>Community Member</option>
                                    <option>Potential Partner / Investor</option>
                                    <option>Researcher / Institution</option>
                                    <option>Student</option>
                                    <option>Other</option>
                                </select>
                            </div>
                           <div>
                             <label for="message" class="block mb-2 font-medium text-medium-text font-heading">Your Message</label>
                             <textarea id="message" rows="5" required class="font-body w-full bg-space-dark/50 border border-medium-text/30 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-cyan-glow text-light-text"></textarea>
                           </div>
                         <button type="submit" class="font-heading w-full bg-cyan-glow text-space-dark font-semibold py-4 px-6 rounded-lg hover:bg-opacity-80 transition-all duration-300 hover:shadow-lg hover:shadow-cyan-glow/30">Send with heart</button>
                     </form>
                      <div id="form-success" class="hidden text-center border border-cyan-glow rounded-lg p-8 mt-6">
                         <p class="font-heading text-cyan-glow text-3xl mb-2">Thank You!</p>
                         <p class="font-body text-medium-text">Your message has been received.</p>
                      </div>
                   </div>
              </div>
        </section>
    </main>
    
    <footer class="py-12 bg-black/20 border-t border-white/10 mt-20">
        <div class="container mx-auto px-6 text-center text-medium-text">
            <a href="#home" class="font-heading text-3xl text-soft-gold mb-4 inline-block">Mehfooz</a>
            <div class="flex justify-center gap-6 mb-6">
                <a href="#" class="hover:text-cyan-glow transition-colors" title="Facebook">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v2.385z"/></svg>
                </a>
                <a href="#" class="hover:text-cyan-glow transition-colors" title="WhatsApp">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.894 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.447-4.435-9.884-9.888-9.884-5.448 0-9.886 4.434-9.889 9.885.002 2.024.603 3.965 1.667 5.63l-1.117 4.066 4.159-1.087z"/></svg>
                </a>
                <a href="#" class="hover:text-cyan-glow transition-colors" title="YouTube">
                     <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/></svg>
                </a>
            </div>
            <p class="font-body">&copy; 2025 Mehfooz Internet. All rights reserved.</p>
            <p class="font-body text-sm mt-2">Cultivating a digitally literate society in Gilgit Baltistan.</p>
        </div>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        gsap.registerPlugin(ScrollTrigger, Draggable);
        
        const mainContent = document.getElementById('main-content');
        
        // --- CUSTOM CURSOR ---
        const cursorDot = document.getElementById('cursor-dot');
        const cursorCircle = document.getElementById('cursor-circle');
        let mouse = { x: window.innerWidth / 2, y: window.innerHeight / 2 };
        let circlePos = { ...mouse };
        let circleScale = 1;

        window.addEventListener('mousemove', e => {
            mouse.x = e.clientX;
            mouse.y = e.clientY;
        });

        gsap.ticker.add(() => {
            gsap.to(cursorDot, { duration: 0.2, x: mouse.x - 4, y: mouse.y - 4 }); // Offset by half size
            
            const dx = mouse.x - circlePos.x;
            const dy = mouse.y - circlePos.y;
            circlePos.x += dx * 0.15;
            circlePos.y += dy * 0.15;
            gsap.to(cursorCircle, { 
                duration: 0.3, 
                x: circlePos.x - 20, // Offset by half size
                y: circlePos.y - 20, 
                scale: circleScale,
                ease: 'power2.out' 
            });
        });
        
        document.querySelectorAll('a, button, #seed-container, input, select, textarea, .value-container').forEach(el => {
            el.addEventListener('mouseenter', () => circleScale = 1.5);
            el.addEventListener('mouseleave', () => circleScale = 1);
        });


        // --- SMOOTH SCROLL ---
        const lenis = new Lenis({ lerp: 0.08 }); // Slightly faster lerp for a snappier feel
        function raf(time) {
            lenis.raf(time);
            requestAnimationFrame(raf);
        }
        requestAnimationFrame(raf);

        // --- MENU ---
        const menuToggle = document.getElementById('menu-toggle');
        const menuOverlay = document.getElementById('menu-overlay');
        const menuLinks = document.querySelectorAll('.menu-link');
        const toggleSpans = menuToggle.querySelectorAll('span');
        let isMenuOpen = false;

        const menuTimeline = gsap.timeline({ paused: true })
            .to(menuOverlay, { duration: 0.8, ease: 'power3.inOut' }) // Keep overlay animation smooth
            .to(menuLinks, { y: 0, opacity: 1, duration: 0.6, stagger: 0.07, ease: 'power3.out' }, "-=0.6"); // Slightly faster stagger

        menuToggle.addEventListener('click', () => {
            isMenuOpen = !isMenuOpen;
            menuToggle.classList.toggle('open');
            menuOverlay.classList.toggle('open');
            if(isMenuOpen) {
                menuTimeline.play();
                gsap.to(toggleSpans[0], { y: 6, rotate: 45, duration: 0.3, ease: 'power2.out' });
                gsap.to(toggleSpans[1], { y: -2, rotate: -45, duration: 0.3, ease: 'power2.out' });
                lenis.stop();
            } else {
                menuTimeline.reverse();
                gsap.to(toggleSpans[0], { y: 0, rotate: 0, duration: 0.3, ease: 'power2.out' });
                gsap.to(toggleSpans[1], { y: 0, rotate: 0, duration: 0.3, ease: 'power2.out' });
                lenis.start();
            }
        });
        menuLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault(); // Prevent default anchor jump
                isMenuOpen = false;
                menuToggle.classList.remove('open');
                menuOverlay.classList.remove('open');
                menuTimeline.reverse();
                gsap.to(toggleSpans[0], { y: 0, rotate: 0, duration: 0.3, ease: 'power2.out' });
                gsap.to(toggleSpans[1], { y: 0, rotate: 0, duration: 0.3, ease: 'power2.out' });
                lenis.start();
                // Smooth scroll to section after menu closes
                gsap.delayedCall(0.5, () => { // Wait for menu animation
                    lenis.scrollTo(link.getAttribute('href'), {duration: 1.5, ease: 'power2.inOut'});
                });
            });
        });

        // --- "A SEED OF TRUST" GAME ---
        const gameScreen = document.getElementById('game-screen');
        const seedContainer = document.getElementById('seed-container');
        const enterBtn = document.getElementById('enter-site-btn');
        const feedbackEl = document.getElementById('game-feedback');
        const plantPaths = document.querySelectorAll('#seed-svg .plant-path');
        let growthAnimation;
        let solved = false;

        function setupGrowthAnimation() {
            // Pre-set dash offset to its full length
            plantPaths.forEach(path => {
                const length = path.getTotalLength();
                path.style.strokeDasharray = length;
                path.style.strokeDashoffset = length;
             });

            growthAnimation = gsap.timeline({ paused: true, onComplete: onSolved });
            growthAnimation.to(plantPaths, {
                strokeDashoffset: 0,
                duration: 0.6, // Faster growth
                ease: "power1.out", // Quicker ease
                stagger: 0.05 // Faster stagger
            });
        }
        
        function onSolved() {
            if(solved) return;
            solved = true;
            feedbackEl.textContent = "Trust takes root.";
            gsap.to(feedbackEl, { opacity: 1, duration: 0.5 });
            gsap.to(enterBtn, { opacity: 1, scale: 1, pointerEvents: 'auto', duration: 0.5, delay: 0 }); // Show button immediately
        }
        
        const startGrowth = (e) => { 
            e.preventDefault(); // Prevent text selection on hold
            if (!solved) growthAnimation.play(); 
        };
        const stopGrowth = () => { 
            // Don't reverse if solved, just keep it grown
            if (!solved) growthAnimation.pause(); // Just pause instead of reverse
        };
        
        seedContainer.addEventListener('mousedown', startGrowth);
        seedContainer.addEventListener('touchstart', startGrowth, {passive: true});
        // Remove mouseup/touchend listeners to keep it grown once triggered
        // seedContainer.addEventListener('mouseup', stopGrowth);
        // seedContainer.addEventListener('mouseleave', stopGrowth);
        // seedContainer.addEventListener('touchend', stopGrowth);


        enterBtn.addEventListener('click', () => {
             gsap.to(gameScreen, { 
                 opacity: 0, 
                 duration: 0.8, // Slightly faster fade out
                 ease: 'power1.in',
                 onComplete: () => {
                     gameScreen.style.display = 'none';
                     gsap.to(mainContent, { opacity: 1, duration: 1, ease: 'power1.out' });
                     initAnimations(); // Initialize animations AFTER fade-in starts
                     lenis.scrollTo('#home', { immediate: true });
                 }
             });
        });

        setupGrowthAnimation();


        // --- THREE.JS BACKGROUND ---
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 2; // Move camera closer
        const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('bg-canvas'), alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

        const particleCount = 10000; // More particles
        const positions = new Float32Array(particleCount * 3);
        const colors = new Float32Array(particleCount * 3);
        const sizes = new Float32Array(particleCount);
        const colorCyan = new THREE.Color(0x00f0ff);
        const colorGold = new THREE.Color(0xf0e68c);
        const colorWhite = new THREE.Color(0xffffff);

        for(let i = 0; i < particleCount; i++) {
            const i3 = i * 3;
            positions[i3] = (Math.random() - 0.5) * 15; // Spread out more
            positions[i3 + 1] = (Math.random() - 0.5) * 15;
            positions[i3 + 2] = (Math.random() - 0.5) * 15;
            
            // Mix colors - more white/cyan, less gold
            const randColor = Math.random();
            let mixedColor;
            if (randColor < 0.6) mixedColor = colorWhite.clone();
            else if (randColor < 0.9) mixedColor = colorCyan.clone().lerp(colorWhite, Math.random() * 0.5);
            else mixedColor = colorGold.clone().lerp(colorWhite, Math.random() * 0.7);
            
            colors[i3] = mixedColor.r;
            colors[i3 + 1] = mixedColor.g;
            colors[i3 + 2] = mixedColor.b;

            sizes[i] = Math.random() * 1.5 + 0.5; // Vary sizes more
        }
        const particlesGeometry = new THREE.BufferGeometry();
        particlesGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
        particlesGeometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));
        particlesGeometry.setAttribute('size', new THREE.BufferAttribute(sizes, 1));
        
        const particlesMaterial = new THREE.PointsMaterial({
            // size: 0.015, // Size controlled by attribute now
            sizeAttenuation: true,
            transparent: true,
            opacity: 0.7,
            vertexColors: true,
            blending: THREE.AdditiveBlending, // Brighter overlap
            depthWrite: false // Prevent particles hiding each other strangely
        });
        const particles = new THREE.Points(particlesGeometry, particlesMaterial);
        scene.add(particles);

        const clock = new THREE.Clock();

        function animate() {
            const elapsedTime = clock.getElapsedTime();
            const scrollY = lenis.scroll;
            
            // Subtle rotation and mouse influence
            particles.rotation.y = elapsedTime * 0.02 + scrollY * 0.0001;
            particles.rotation.x = mouse.y * 0.00005 - 0.1; // Reduced mouse effect
            particles.position.y = -scrollY / window.innerHeight * 1; // Less vertical movement

            // Subtle pulsing effect (optional, can be performance intensive)
            // particlesMaterial.opacity = 0.6 + Math.sin(elapsedTime * 2) * 0.1;

            renderer.render(scene, camera);
            requestAnimationFrame(animate);
        }
        animate();

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        });

        // --- MAIN ANIMATIONS ---
        function initAnimations() {
            // Animate lines in paragraphs
            gsap.utils.toArray('.line-parent').forEach(el => {
                gsap.fromTo(el.querySelector('.line-child'), 
                { y: '100%' }, 
                { 
                    y: '0%', 
                    duration: 1.2, 
                    ease: 'power4.out',
                    scrollTrigger: { trigger: el, start: 'top 90%' }
                });
            });
            
            // Animate words in paragraphs
            gsap.utils.toArray('.word-anim p').forEach(p => {
                 const words = p.innerText.split(' ');
                 p.innerHTML = words.map(word => `<span class="word-wrapper" style="display: inline-block; overflow: hidden;"><span class="word" style="display: inline-block; transform: translateY(100%); opacity: 0;">${word}&nbsp;</span></span>`).join('');
                
                 gsap.to(p.querySelectorAll('.word'), {
                    y: '0%', 
                    opacity: 1, 
                    duration: 0.6, 
                    ease: 'power3.out', 
                    stagger: 0.03, // Slightly slower stagger
                    scrollTrigger: { trigger: p, start: 'top 85%' }
                 });
            });
            
            // Reveal Up animation (used for sections/blocks)
            gsap.utils.toArray('.reveal-up').forEach(elem => {
                gsap.fromTo(elem, { opacity: 0, y: 60 }, { // Increased y offset
                    opacity: 1,
                    y: 0,
                    duration: 1.5, // Longer duration
                    ease: 'power4.out', // Smoother ease
                    scrollTrigger: {
                        trigger: elem,
                        start: 'top 85%',
                    }
                });
            });

            // Parallax Images
            gsap.utils.toArray('.parallax-image').forEach(img => {
                gsap.to(img, {
                    y: '-15%', // Adjusted parallax amount
                    ease: 'none',
                    scrollTrigger: {
                        trigger: img.closest('.parallax-container'), // Trigger on container
                        scrub: 1.5 // Smoother scrub
                    }
                });
            });
            
            // Counter Animation
            const userCounter = document.getElementById('user-counter');
            if (userCounter) { // Check if element exists before animating
                gsap.from(userCounter, {
                    textContent: 0,
                    duration: 2.5, // Slightly longer
                    ease: "power2.out", // Smoother ease
                    snap: { textContent: 1 },
                    scrollTrigger: { trigger: userCounter, start: "top 85%" },
                    onUpdate: function() {
                        this.targets()[0].innerHTML = Math.ceil(this.targets()[0].textContent).toLocaleString() + "+";
                    }
                });
                 // Make sure the end value is set correctly
                 ScrollTrigger.create({
                    trigger: userCounter,
                    start: "top 85%",
                    onEnter: () => gsap.to(userCounter, { textContent: "100000", duration: 2.5, ease: "power2.out", onUpdate: function() { this.targets()[0].innerHTML = Math.ceil(this.targets()[0].textContent).toLocaleString() + "+"; }})
                 });
            }


            // Timeline Path Animation
            const timelinePath = document.querySelector('.timeline-path');
            if(timelinePath) { // Check if element exists
                const length = timelinePath.getTotalLength();
                gsap.set(timelinePath, { strokeDasharray: length, strokeDashoffset: length });
                gsap.to(timelinePath, {
                    strokeDashoffset: 0,
                    duration: 2.5, // Slightly longer
                    ease: 'power2.inOut',
                    scrollTrigger: {
                        trigger: timelinePath,
                        start: 'top 85%'
                    }
                });
            }


            // Nav link smooth scroll and active state (Uses Menu links now)
            gsap.utils.toArray('.content-section').forEach((section) => {
                ScrollTrigger.create({
                    trigger: section,
                    start: 'top center+=100',
                    end: 'bottom center-=100',
                    onToggle: self => {
                        if (self.isActive) {
                            const sectionId = section.getAttribute('id');
                            document.querySelectorAll('.menu-link').forEach(l => l.classList.remove('active'));
                            const activeLink = document.querySelector(`.menu-link[href="#${sectionId}"]`);
                            if (activeLink) activeLink.classList.add('active');
                        }
                    }
                });
            });

            // Make logo and other anchors smooth scroll too
             document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    e.preventDefault();
                    if(!isMenuOpen) { // Only scroll if menu is not open (menu handles its own closing)
                        lenis.scrollTo(this.getAttribute('href'), {duration: 1.5, ease: 'power2.inOut'});
                    }
                });
            });
        }
        
        // --- MEHFOOZBOT LOGIC ---
        const chatLog = document.getElementById('chat-log');
        const chatForm = document.getElementById('chat-form');
        const chatInput = document.getElementById('chat-input');
        const promptButtonsContainer = document.getElementById('prompt-buttons');

        const botResponses = {
            "greeting": "Salaam! Welcome to Mehfooz. How can I help you find clarity today?", // More culturally relevant greeting
            "default": "That's an interesting thought! While I'm still learning, the full Mehfooz platform offers resources on many topics. Ask me about our story, safety, or spotting fake news!",
            "misinformation": "Spotting misinformation is key! Look closely at the source - is it trustworthy? Does it use strong, emotional language? Does it offer proof? Real news is often calmer and shows evidence.",
            "safety": "Staying safe online is like protecting your home. Use strong, different passwords for important sites. Be careful what personal details you share, especially in messages or public posts. Think before you click links!",
            "story": "Mehfooz began with conversations in Skardu, listening to the community's hopes and worries about the digital world. We aim to build a bridge between traditional wisdom and modern tools. You can feel our story in the 'Journal' section.",
            "ulema": "We proudly partner with respected local Ulema. They are trusted voices who help us share digital literacy in a way that resonates deeply within the community, blending faith and knowledge."
        };
        const promptQuestions = {
            "What's your story?": "story",
            "How do you work with Ulema?": "ulema", // More specific prompt
            "Tips for spotting fake news?": "misinformation", // More specific prompt
            "How can I stay safe online?": "safety" // More specific prompt
        };
        
        function addMessage(message, sender, isImmediate = false) {
            const bubble = document.createElement('div');
            bubble.className = `chat-bubble ${sender}-bubble font-body`; // Ensure body font
            bubble.textContent = message;
            chatLog.appendChild(bubble);
            gsap.from(bubble, { opacity: 0, y: 20, duration: 0.5, delay: isImmediate ? 0 : 0.3 }); // Sligthly slower bubble animation
            chatLog.scrollTop = chatLog.scrollHeight;
        }

        function handleUserInput(input) {
             if(input.trim()){
                addMessage(input, 'user', true);
                chatInput.value = '';
                chatInput.disabled = true;
                promptButtonsContainer.style.pointerEvents = 'none'; // Disable buttons during response
                gsap.to(promptButtonsContainer.querySelectorAll('button'), { opacity: 0.5, duration: 0.3 });

                // Simulate thinking
                addMessage("...", 'bot', true); 
                const thinkingBubble = chatLog.lastChild;

                setTimeout(() => {
                    gsap.to(thinkingBubble, {opacity: 0, duration: 0.3, onComplete: () => thinkingBubble.remove()});
                    const responseKey = promptQuestions[input] || Object.keys(promptQuestions).find(key => input.toLowerCase().includes(key.toLowerCase().split(' ')[2])) || 'default'; // Basic keyword matching
                    const response = botResponses[responseKey] || botResponses.default;
                    addMessage(response, 'bot');
                    chatInput.disabled = false;
                    chatInput.focus();
                    promptButtonsContainer.style.pointerEvents = 'auto'; // Re-enable buttons
                    gsap.to(promptButtonsContainer.querySelectorAll('button'), { opacity: 1, duration: 0.3 });
                }, 800 + Math.random() * 500); // Variable delay
             }
        }

        chatForm.addEventListener('submit', e => {
             e.preventDefault();
             handleUserInput(chatInput.value);
        });
        
        Object.keys(promptQuestions).forEach(question => {
            const button = document.createElement('button');
            button.className = "font-body text-sm bg-space-dark/50 border border-medium-text/30 rounded-full py-2 px-3 text-medium-text hover:border-cyan-glow hover:text-cyan-glow transition-colors text-left";
            button.textContent = question;
            button.onclick = () => {
                handleUserInput(question);
            }
            promptButtonsContainer.appendChild(button);
        });

        // Delay initial greeting slightly
        setTimeout(() => {
             addMessage(botResponses.greeting, 'bot', true);
        }, 500);

        // --- CONTACT FORM LOGIC ---
        const contactForm = document.getElementById('contact-form');
        const formSuccess = document.getElementById('form-success');
        contactForm.addEventListener('submit', e => {
             e.preventDefault();
             // Simulate form submission
             gsap.to(contactForm, { opacity: 0, duration: 0.5, onComplete: () => {
                 contactForm.style.display = 'none';
                 formSuccess.classList.remove('hidden');
                 gsap.from(formSuccess, {opacity: 0, y: 20, duration: 0.5});
             }});
        });

    });
    </script>
</body>
</html>
