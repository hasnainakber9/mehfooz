<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mehfooz</title>

    <link rel="preload" as="image" href="https://images.unsplash.com/photo-1623581203333-53531b1bbf8e?q=80&w=1887&auto=format&fit=crop">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,700;1,400&family=Montserrat:wght@500;700&family=Special+Elite&family=Ubuntu:wght@400;500;700&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollToPlugin.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lenis@1.0.45/dist/lenis.min.js"></script>
    <script src="https://unpkg.com/split-type"></script>
    
    <style>
        /*
          CSS STYLES
          Summary: Re-added styles for #game-screen. Added styles for #mehfoozbot-demo section.
          Ensured .pillar-card styles correctly apply to #approach content. Maintained warm aesthetic.
        */
        :root {
            /* Warm, Intimate Palette */
            --dark-bg: #1e1b2e; --light-text: #e0d8f0; --medium-text: #a89fbf;
            --card-bg: #2a263f; --border-color: #403a5f; --gold: #ffc880; /* Amber */
            --teal: #ff94a6; /* Rose */ --danger: #ff6b6b; --success: #6bffb8;

            /* Fonts */
            --font-heading: 'Montserrat', sans-serif; --font-body: 'Ubuntu', sans-serif;
            --font-script: 'Special Elite', cursive; --font-serif-accent: 'Lora', serif;

            /* Animation */
            --transition-duration: 0.4s; --transition-ease: cubic-bezier(0.25, 0.1, 0.25, 1); 
        }

        html.lenis { height: auto; } .lenis.lenis-smooth { scroll-behavior: auto; }
        body { background-color: var(--dark-bg); color: var(--light-text); font-family: var(--font-body); overflow-x: hidden; cursor: none; }
        .antialiased { -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
        
        /* Skip Link */
        .skip-link { position: absolute; top: -999px; left: 0; background: var(--gold); color: var(--dark-bg); padding: 1rem; z-index: 10001; font-family: var(--font-heading); font-weight: 700; border-bottom-right-radius: 12px; transform: translateY(-100%); transition: transform var(--transition-duration) var(--transition-ease); }
        .skip-link:focus { top: 0; transform: translateY(0); }

        /* Cursor */
        #cursor-light { position: fixed; width: 900px; height: 900px; border-radius: 50%; left: 0; top: 0; pointer-events: none; background: radial-gradient(circle, rgba(255, 200, 128, 0.05) 0%, transparent 65%); transform: translate(-50%, -50%); z-index: 9999; transition: transform 0.4s ease-out, opacity 0.4s ease; opacity: 0; }
        #cursor-dot { position: fixed; width: 8px; height: 8px; background-color: var(--gold); border-radius: 50%; left: 0; top: 0; pointer-events: none; transform: translate(-50%, -50%); z-index: 10000; transition: transform 0.3s var(--transition-ease), background-color var(--transition-duration) var(--transition-ease), opacity var(--transition-duration) var(--transition-ease); opacity: 0; }
        body:hover > #cursor-light, body:hover > #cursor-dot { opacity: 1; }
        a:hover ~ #cursor-dot, button:hover ~ #cursor-dot, select:hover ~ #cursor-dot { transform: translate(-50%, -50%) scale(1.6); background-color: var(--teal); }
        a:hover ~ #cursor-light, button:hover ~ #cursor-light, select:hover ~ #cursor-light { transform: translate(-50%, -50%) scale(1.1); }

        /* Background Canvas */
        #bg-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100vh; z-index: -1; opacity: 0; transition: opacity 1.5s ease 0.8s; }
        body.site-entered #bg-canvas { opacity: 0.8; }

        /* Typography */
        .font-script { font-family: var(--font-script); font-weight: 400; } .font-serif { font-family: var(--font-serif-accent); }
        h1, h2, h3, h4, h5, h6 { font-family: var(--font-heading); font-weight: 700; color: var(--light-text); }
        h1 { font-size: clamp(2.5rem, 5vw + 1rem, 4.2rem); letter-spacing: -0.01em; } h2 { font-size: clamp(1.8rem, 4vw, 2.8rem); } h3 { font-size: 1.4rem; font-weight: 500; }
        p { font-size: 1.1rem; line-height: 1.75; color: var(--medium-text); max-width: 65ch; font-weight: 400; }
        blockquote { font-family: var(--font-serif-accent); font-style: italic; font-size: 1.25rem; border-color: var(--gold); color: var(--medium-text); }
        cite { font-family: var(--font-body); font-style: normal; }

        /* Preloader */
        #loader { display: none; position: fixed; inset: 0; z-index: 10000; display: flex; align-items: center; justify-content: center; background-color: var(--dark-bg); opacity: 0; }
        .loader-logo path:nth-child(1) { fill: var(--gold); opacity: 0.1; } .loader-logo path:nth-child(2) { fill: var(--gold); opacity: 0.3; } .loader-logo path:nth-child(3) { fill: var(--gold); }

        /* --- INTRO GAME STYLES --- */
         #game-screen {
            position: fixed; inset: 0; z-index: 101; 
            display: flex; align-items: center; justify-content: center; 
            background-color: var(--dark-bg);
            opacity: 0; /* Starts hidden */
            transition: opacity 0.8s ease-in-out;
         }
         .game-card {
             background: var(--card-bg);
             border: 1px solid var(--border-color);
             border-radius: 1rem;
             padding: 2.5rem 2rem;
             max-width: 500px;
             width: 90%;
             box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
             text-align: center;
         }
         .game-choice {
             display: block; width: 100%; margin-bottom: 1rem; padding: 1rem 1.5rem;
             background-color: transparent; border: 1px solid var(--border-color);
             color: var(--medium-text); border-radius: 12px; 
             font-family: var(--font-serif-accent); font-size: 1.1rem; text-align: left; 
             transition: all var(--transition-duration) var(--transition-ease);
         }
         .game-choice:hover, .game-choice:focus-visible {
             background-color: rgba(255, 200, 128, 0.1); border-color: var(--gold);
             color: var(--gold); transform: scale(1.02); 
             box-shadow: 0 0 15px 0 rgba(255, 200, 128, 0.2); outline: none;
         }
         .game-feedback { min-height: 2rem; margin-top: 1.5rem; color: var(--medium-text); font-style: italic; }

        /* Header & Navigation */
        #site-header { opacity: 0; transform: translateY(-100%); transition: background-color var(--transition-duration) var(--transition-ease), backdrop-filter var(--transition-duration) var(--transition-ease), border-bottom-color 0.3s ease; border-bottom: 1px solid transparent; }
        #site-header.scrolled { background: rgba(30, 27, 46, 0.85); backdrop-filter: blur(14px); -webkit-backdrop-filter: blur(14px); border-bottom-color: var(--border-color); box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .nav-logo { font-family: var(--font-script); color: var(--gold); }
        .nav-link { font-family: var(--font-heading); font-weight: 500; color: var(--light-text); padding: 0.5rem 0.25rem; border-radius: 6px; outline: none; transition: color var(--transition-duration) var(--transition-ease), box-shadow var(--transition-duration) var(--transition-ease), transform var(--transition-duration) var(--transition-ease); position: relative; }
        .nav-link:hover { color: var(--gold); transform: translateY(-1px); }
        .nav-link:focus-visible { color: var(--gold); box-shadow: 0 0 0 2px var(--gold); transform: translateY(-1px); }
        .nav-link.active { color: var(--gold); }
        .nav-link.active::after { content: ''; position: absolute; bottom: -4px; left: 10%; width: 80%; height: 2px; background: var(--gold); transform: scaleX(1); transition: transform var(--transition-duration) var(--transition-ease); }
        
        /* Section Padding & Anchors */
        section[id] { scroll-margin-top: 100px; padding-top: 140px; padding-bottom: 140px; }

        /* Hero Section */
        #home { min-height: 100vh; padding: 0; display: flex; align-items: center; justify-content: center; text-align: center; position: relative; overflow: hidden; }
        .hero-background-video, .hero-background-image { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; z-index: 0; opacity: 0.15; transition: opacity var(--transition-duration) ease; }
        .hero-background-video { background-color: #000; } .hero-background-image { background-color: var(--dark-bg); }
        #home::after { content: ''; position: absolute; inset: 0; z-index: 1; background: radial-gradient(ellipse at center, transparent 40%, var(--dark-bg) 90%); }
        .hero-content { position: relative; z-index: 2; }
        #hero-headline { font-family: var(--font-script); color: var(--gold); text-shadow: 0 0 20px rgba(255, 200, 128, 0.3); }
        #bg-toggle { position: absolute; bottom: 1.5rem; right: 1.5rem; z-index: 10; background: rgba(42, 38, 63, 0.7); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); border: 1px solid var(--border-color); color: var(--medium-text); padding: 0.4rem 0.8rem; border-radius: 99px; font-family: var(--font-heading); font-size: 0.75rem; font-weight: 500; transition: all var(--transition-duration) var(--transition-ease); }
        #bg-toggle:hover { color: var(--light-text); border-color: var(--teal); background: var(--teal); box-shadow: 0 0 15px 0 rgba(255, 148, 166, 0.4); }
        #bg-toggle:focus-visible { outline: none; box-shadow: 0 0 15px 0px rgba(255, 200, 128, 0.5); }
        #home .hero-background-video { display: block; } #home .hero-background-image { display: none; }
        #home.static-bg-active .hero-background-video { display: none; } #home.static-bg-active .hero-background-image { display: block; }

        /* Journal & Other Sections */
        #journal h2 { color: var(--gold); font-family: var(--font-script); }
        .journal-image-container { border-radius: 12px; overflow: hidden; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.4); opacity: 0; clip-path: inset(10% 30% 10% 30%); transform: scale(1.1); }
        .journal-image-container img { width: 100%; height: 100%; object-fit: cover; filter: saturate(0.9); transition: transform 0.6s ease; }
        #approach h2 { color: var(--gold); font-family: var(--font-script); } #approach h3 { color: var(--teal); font-family: var(--font-script); }
        .pillar-card { background: linear-gradient(145deg, var(--card-bg) 0%, rgba(42, 38, 63, 0.8) 100%); border: 1px solid var(--border-color); border-radius: 16px; padding: 2.5rem; opacity: 0; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.2), 0 4px 6px -4px rgba(0,0,0,0.15); transition: transform var(--transition-duration) var(--transition-ease), box-shadow var(--transition-duration) var(--transition-ease), border-color var(--transition-duration) var(--transition-ease); position: relative; overflow: hidden; }
        .pillar-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; border-radius: inherit; pointer-events: none; background: radial-gradient(ellipse at center, rgba(255, 200, 128, 0.1) 0%, transparent 70%); opacity: 0; transform: scale(0.8); transition: opacity var(--transition-duration) var(--transition-ease), transform var(--transition-duration) var(--transition-ease); }
        .pillar-card:hover, .pillar-card:focus-within { transform: translateY(-6px); box-shadow: 0 20px 30px -5px rgba(0,0,0,0.3), 0 8px 15px -6px rgba(0,0,0,0.2); border-color: var(--gold); outline: none; }
        .pillar-card:hover::before, .pillar-card:focus-within::before { opacity: 1; transform: scale(1); }
        .pillar-card:focus-visible { transform: translateY(-6px); box-shadow: 0 20px 30px -5px rgba(0,0,0,0.3), 0 8px 15px -6px rgba(0,0,0,0.2), 0 0 0 2px var(--gold); border-color: var(--gold); outline: none; }
        .pillar-card:focus-visible::before { opacity: 1; transform: scale(1); }


        /* MehfoozBot Demo Section */
         #mehfoozbot-demo h2 { color: var(--gold); font-family: var(--font-script); }
         #mehfoozbot-demo h3 { color: var(--teal); font-family: var(--font-script); } /* If subheadings needed */


        #community h2 { color: var(--gold); font-family: var(--font-script); } #community h3 { color: var(--teal); font-family: var(--font-script); }
        #vision h2 { color: var(--gold); font-family: var(--font-script); } #vision p.font-script { color: var(--teal); font-family: var(--font-script); } #vision h3 { color: var(--light-text); font-family: var(--font-heading); }
        .btn-outline { border: 1px solid var(--teal); color: var(--teal); font-family: var(--font-heading); font-weight: 500; padding: 0.6rem 1.2rem; border-radius: 99px; transition: all var(--transition-duration) var(--transition-ease); }
        .btn-outline:hover, .btn-outline:focus-visible { background-color: var(--teal); color: white; transform: translateY(-3px); box-shadow: 0 0 15px 0 rgba(255, 148, 166, 0.4); outline: none; }
        
        #values h2 { color: var(--gold); font-family: var(--font-script); } #values h3 { color: var(--teal); font-family: var(--font-script); }
        .value-icon { stroke-width: 1; transition: all 0.4s var(--transition-ease); color: var(--medium-text); }
        .value-container { transition: transform var(--transition-duration) var(--transition-ease); border-radius: 12px; outline: none; } 
        .value-container:hover { transform: translateY(-4px); }
        .value-container:hover .value-icon { transform: scale(1.15); color: var(--gold); }
         .value-container:focus-visible { transform: translateY(-4px); box-shadow: 0 0 0 2px var(--gold); }
         .value-container:focus-visible .value-icon { color: var(--gold); transform: scale(1.15); }


        /* Connect & Chat (Forms only now) */
        #connect h2 { color: var(--gold); font-family: var(--font-script); } 
        #connect h3 { color: var(--teal); font-family: var(--font-script); }
        
        /* Chat moved to #mehfoozbot-demo */
        #chat-log { background: linear-gradient(180deg, rgba(30, 27, 46, 0.5) 0%, rgba(42, 38, 63, 0.7) 100%); border-radius: 12px 12px 0 0; box-shadow: inset 0 5px 15px rgba(0,0,0,0.3); }
        #chat-form-container { background: var(--card-bg); border-radius: 0 0 12px 12px; }
        .chat-bubble { max-width: 75%; padding: 14px 20px; border-radius: 22px; line-height: 1.6; font-family: var(--font-body); box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -2px rgba(0,0,0,0.1); }
        .user-bubble { background: linear-gradient(135deg, var(--teal), #ff7a8f); color: white; border-bottom-right-radius: 6px; align-self: flex-end; }
        .bot-bubble { background-color: var(--card-bg); color: var(--light-text); border-bottom-left-radius: 6px; align-self: flex-start; }
        .chat-prompt-btn { background-color: transparent; border: 1px solid var(--border-color); color: var(--medium-text); transition: all var(--transition-duration) var(--transition-ease); border-radius: 99px; padding: 0.6rem 1.1rem; font-size: 0.875rem; font-family: var(--font-heading); font-weight: 500; }
        .chat-prompt-btn:hover, .chat-prompt-btn:focus-visible { background-color: var(--teal); border-color: var(--teal); color: white; transform: translateY(-3px); box-shadow: 0 0 15px 0 rgba(255, 148, 166, 0.4); outline: none; }

        /* Forms */
        .form-input { background-color: var(--card-bg); border: 1px solid var(--border-color); color: var(--light-text); border-radius: 10px; padding: 0.9rem 1.1rem; transition: all var(--transition-duration) var(--transition-ease); width: 100%; font-family: var(--font-body); }
        .form-input:focus, .form-input:focus-visible { outline: none; border-color: var(--teal); box-shadow: 0 0 15px 0px rgba(255, 148, 166, 0.4); }
        select.form-input { appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3E%3Cpath stroke='%23a89fbf' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 0.8rem center; background-size: 1.3em 1.3em; padding-right: 2.8rem; }
        .btn-teal { background: linear-gradient(135deg, var(--teal), #ff7a8f); color: white; transition: all var(--transition-duration) var(--transition-ease); border-radius: 99px; font-family: var(--font-heading); font-weight: 700; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -2px rgba(0,0,0,0.1); }
        .btn-teal:hover, .btn-teal:focus-visible { background: linear-gradient(135deg, var(--gold), #ffab57); color: var(--dark-bg); transform: scale(1.05) translateY(-2px); box-shadow: 0 10px 15px -3px rgba(255, 200, 128, 0.3), 0 4px 6px -4px rgba(255, 200, 128, 0.2); outline: none; }

        /* Footer */
        #site-footer { border-top: 1px solid var(--border-color); padding: 2.5rem 0; text-align: center; }
        #site-footer p { color: var(--medium-text); font-size: 0.9rem; max-width: none; }

        /* Responsiveness */
        @media (max-width: 768px) {
            #site-header .nav-links { display: none; }
            h1 { font-size: clamp(2.2rem, 8vw, 3.2rem); } h2 { font-size: clamp(1.6rem, 6vw, 2.3rem); } h3 { font-size: 1.25rem; } p { font-size: 1rem; } blockquote { font-size: 1.05rem; }
            section[id] { scroll-margin-top: 80px; padding-top: 100px; padding-bottom: 100px; }
            .journal-section .flex { flex-direction: column; } .journal-section .w-full { width: 100%; }
            #chat-log { height: 45vh; } .chat-prompt-btn { font-size: 0.75rem; padding: 0.5rem 0.9rem; }
            .pillar-card { padding: 2rem; } 
             .value-container { margin-bottom: 2rem; } 
        }

        /* Reduced Motion */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after { animation-duration: 0.01ms !important; animation-iteration-count: 1 !important; transition-duration: 0.01ms !important; scroll-behavior: auto !important; }
            body { cursor: auto; } #cursor-light, #cursor-dot { display: none !important; } button, a, select { cursor: auto; }
            #bg-canvas { display: none !important; } #home .hero-background-video { display: none !important; } #home .hero-background-image { display: block !important; opacity: 0.15 !important; }
            .reveal-up { opacity: 1; transform: none; } .journal-image-container { opacity: 1; clip-path: none; transform: none; }
            #bg-toggle { display: none; }
            /* Disable hover transforms but keep base shadows/borders */
            .pillar-card:hover, .pillar-card:focus-within, .pillar-card:focus-visible { transform: none; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.2), 0 4px 6px -4px rgba(0,0,0,0.15); border-color: var(--border-color); } 
             .pillar-card::before { display: none; }
             .nav-link:hover, .nav-link:focus-visible { transform: none; }
             .value-container:hover, .value-container:focus-visible { transform: none; }
             .btn-teal:hover, .btn-teal:focus-visible { transform: none; } 
             .btn-outline:hover, .btn-outline:focus-visible { transform: none; }
             .chat-prompt-btn:hover, .chat-prompt-btn:focus-visible { transform: none; }
        }
    </style>
</head>
<body class="antialiased">

    <a href="#main-content" class="skip-link">Skip to main content</a>

    <div id="loader"> <svg class="loader-logo" width="80" height="93" viewBox="0 0 80 93" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M40 0L79.0526 23.25V69.75L40 93L0.947441 69.75V23.25L40 0Z"/> <path d="M40 9.3L71.0526 27.9V65.1L40 83.7L8.94744 65.1V27.9L40 9.3Z"/> <path d="M40 18.6L63.0526 32.55V60.45L40 74.4L16.9474 60.45V32.55L40 18.6Z"/> </svg> </div>

    <div id="game-screen" class="fixed inset-0 z-[101]">
         <div class="game-card">
             <div id="game-content">
                 <h2 class="font-script text-gold text-3xl md:text-4xl mb-4">A Quiet Choice</h2>
                 <p class="text-medium-text mb-8">Which feels closer to your path?</p>
                 <div id="game-choices" class="space-y-4">
                     </div>
                 <p class="game-feedback"></p>
             </div>
             <div id="game-end" class="hidden">
                 <h3 class="font-script text-teal text-3xl mb-4">Trusting the feeling.</h3>
                 <p class="text-medium-text mb-8">Clarity often begins within. Welcome.</p>
                 <button id="enter-site-btn" class="btn-teal font-semibold py-3 px-8 rounded-lg text-lg">Enter Mehfooz</button>
             </div>
         </div>
    </div>

    <div id="cursor-light"></div> <div id="cursor-dot"></div>
    
    <canvas id="bg-canvas"></canvas>

    <main id="main-content" class="opacity-0">
        
        <header id="site-header" class="fixed top-0 left-0 w-full z-50"> 
            <nav class="container mx-auto flex justify-between items-center p-6 md:p-8"> 
                <a href="#home" class="nav-logo text-3xl">Mehfooz</a> 
                <div class="nav-links hidden md:flex gap-8 text-lg items-center"> 
                    <a href="#home" class="nav-link relative" title="Go to Home">Home</a> 
                    <a href="#journal" class="nav-link relative" title="Go to Journal">Journal</a> 
                    <a href="#approach" class="nav-link relative" title="Go to Approach">Approach</a> 
                    <a href="#mehfoozbot-demo" class="nav-link relative" title="Go to MehfoozBot">MehfoozBot</a> <a href="#community" class="nav-link relative" title="Go to Community">Community</a> 
                    <a href="#connect" class="nav-link relative" title="Go to Connect">Connect</a> 
                </div> 
            </nav> 
        </header>

        <section id="home">
            <div class="hero-background-video"> <video autoplay muted loop playsinline id="hero-video-bg" poster="https://images.unsplash.com/photo-1623581203333-53531b1bbf8e?q=80&w=1887&auto=format&fit=crop"> <source src="https://static.videezy.com/system/resources/previews/000/044/744/original/Plexus_Background_Loop_4K.mp4" type="video/mp4"> </video> </div>
            <div class="hero-background-image"> <img src="https://images.unsplash.com/photo-1623581203333-53531b1bbf8e?q=80&w=1887&auto=format&fit=crop" alt="Subtle, warm light pattern abstract background" class="w-full h-full object-cover opacity-30 object-center"> </div>
            <div class="hero-content container px-4 relative z-10"> <h1 id="hero-headline" class="text-5xl md:text-8xl mb-4">Clarity in the Digital Crossroads.</h1> <p id="hero-subheadline" class="text-xl md:text-2xl text-light-text leading-relaxed max-w-4xl mx-auto"> A safe space to find clarity in a connected world. </p> </div>
            <button id="bg-toggle" title="Toggle motion background">Show Static</button>
        </section>

        <section id="journal" class="journal-section">
             <div class="container mx-auto px-6 max-w-4xl"> <div class="flex flex-col md:flex-row gap-12 md:gap-16 items-center"> <div class="w-full md:w-1/2"> <div class="journal-image-container"> <img src="https://images.unsplash.com/photo-1522071820081-009f0129c71c?q=80&w=2070&auto=format&fit=crop" alt="Diverse group learning together in a warm setting" loading="lazy"> </div> </div> <div class="w-full md:w-1/2"> <h2 class="mb-4 reveal-up">From Our Journal</h2> <p class="text-lg mb-6 reveal-up">Mehfooz began not with a line of code, but with a conversation. In a small Skardu teahouse, over cups of warm chai, we listened. We heard stories of connection and confusion, of hope and fear where progress meets peril.</p> <p class="text-lg reveal-up">The need wasn't for more technology, but more understanding. A bridge between timeless wisdom and modern tools. Mehfooz is our promise to help build that bridge, together.</p> </div> </div> </div>
        </section>

        <section id="approach">
             <div class="container mx-auto px-6 max-w-5xl"> 
                 <div class="text-center reveal-up mb-20 section-header"> 
                     <h2 class="mb-4">Our Approach is Simple</h2> 
                 </div> 
                 <div class="grid md:grid-cols-3 gap-10"> 
                     <div class="pillar-card reveal-up" tabindex="0"> 
                         <h3 class="mb-3">Listen First</h3> 
                         <p>We build on existing trust, collaborating with local religious leaders (Ulema) as digital literacy ambassadors, bridging traditional knowledge with modern skills.</p> 
                     </div> 
                     <div class="pillar-card reveal-up" style="--gsap-delay: 0.15s;" tabindex="0"> 
                         <h3 class="mb-3">Guide Gently</h3> 
                         <p>Harnessing AI, MehfoozBot offers personal, patient help, adapting to language and learning style, making technology feel like a friend.</p> 
                     </div> 
                     <div class="pillar-card reveal-up" style="--gsap-delay: 0.3s;" tabindex="0"> 
                         <h3 class="mb-3">Grow Together</h3> 
                         <p>Through localized mini-courses and a unique feedback ecosystem with college students, we ensure our knowledge is always relevant and co-created.</p> 
                     </div> 
                 </div> 
             </div>
        </section>
        
        <section id="mehfoozbot-demo">
             <div class="container mx-auto px-6 max-w-2xl reveal-up"> 
                 <div class="text-center mb-12 section-header">
                     <h2 class="mb-4">Meet MehfoozBot</h2>
                     <p class="text-xl">Your personal guide to digital clarity. Ask anything.</p>
                 </div>
                 <div id="chat-log" class="h-[55vh] flex flex-col gap-4 p-4 md:p-6 overflow-y-auto"> 
                     </div> 
                 <div id="chat-form-container" class="p-4 md:p-6"> 
                     <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mb-4" id="prompt-buttons"> 
                         </div> 
                     <form id="chat-form" class="flex gap-4"> 
                         <input type="text" id="chat-input" placeholder="Ask a friendly question..." class="form-input flex-1 rounded-full py-3 px-6"> 
                         <button type="submit" class="btn-teal rounded-full px-6 py-3 font-semibold">Send</button> 
                     </form> 
                 </div> 
             </div>
        </section>


        <section id="community">
             <div class="container mx-auto px-6 max-w-4xl"> <div class="text-center reveal-up section-header"> <h2 class="mb-4">Heart of Our Community</h2> </div> <div class="mt-16 reveal-up"> <h3 class="mb-8 text-center">Voices from the Valley</h3> <div class="space-y-10"> <blockquote class="border-l-4 pl-8"> "For the first time, I could ask a 'silly' question about my phone without feeling embarrassed. MehfoozBot helped me understand." <cite class="block not-italic mt-3 text-light-text">- A student from Gilgit</cite> </blockquote> <blockquote class="border-l-4 pl-8 text-right"> "They didnâ€™t come to teach; they came to learn with us. That is why we trust them." <cite class="block not-italic mt-3 text-light-text">- An elder from Skardu</cite> </blockquote> </div> </div> </div>
        </section>

        <section id="vision">
              <div class="container mx-auto px-6 max-w-4xl text-center"> <div class="reveal-up section-header"> <h2 class="mb-4">Our Five-Year Vision</h2> <p class="text-xl max-w-3xl mx-auto">To scale our impact together, offering an opportunity for partners to co-create a digitally resilient future.</p> </div> <div class="mt-20 grid md:grid-cols-2 gap-x-16 gap-y-20 text-left"> <div class="reveal-up"> <p class="font-script text-teal text-7xl" id="user-counter">0</p> <h3 class="text-2xl mt-3">Empowered Users</h3> <p class="mt-3">Leveraging established networks and community structures for organic, sustainable growth across Pakistan.</p> </div> <div class="reveal-up"> <p class="font-script text-teal text-7xl">3+</p> <h3 class="text-2xl mt-3">Platform Evolutions</h3> <p class="mt-3">AI-driven learning paths, enhanced offline capabilities, and expanded indigenous language support.</p> </div> <div class="reveal-up"> <h3 class="font-script text-teal text-5xl mb-4">Deepened Integration</h3> <p class="mt-3">Strengthening partnerships with institutions, community figures, and policymakers for lasting adoption.</p> </div> <div class="reveal-up"> <h3 class="font-script text-teal text-5xl mb-4">Become a Partner</h3> <p class="mt-3">Seeking partners for strategic guidance, technical support, funding, and operational efficiency.</p> <a href="#connect" class="btn-outline mt-6 inline-block">Connect With Us</a> </div> </div> </div>
        </section>

        <section id="values">
              <div class="container mx-auto px-6 max-w-5xl"> <div class="text-center reveal-up mb-20 section-header"> <h2 class="mb-4">Our Guiding Principles</h2> </div> <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-14 text-center"> <div class="reveal-up value-container" tabindex="0"> <svg class="w-16 h-16 mx-auto value-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a3.004 3.004 0 015.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" /></svg> <h3 class="text-2xl mt-5">Collaboration</h3> <p class="mt-3">Building partnerships with local leaders, researchers, and community members for a holistic approach.</p> </div> <div class="reveal-up value-container" tabindex="0"> <svg class="w-16 h-16 mx-auto value-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg> <h3 class="text-2xl mt-5">Integrity</h3> <p class="mt-3">Upholding the highest standards of accuracy, ensuring users receive trustworthy information.</p> </div> <div class="reveal-up value-container" tabindex="0"> <svg class="w-16 h-16 mx-auto value-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" /></svg> <h3 class="text-2xl mt-5">Inclusivity</h3> <p class="mt-3">Embracing diversity by providing resources in multiple languages, ensuring everyone has access.</p> </div> <div class="reveal-up value-container" tabindex="0"> <svg class="w-16 h-16 mx-auto value-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" /></svg> <h3 class="text-2xl mt-5">Innovation</h3> <p class="mt-3">Leveraging cutting-edge technologies like AI to continuously enhance our educational offerings.</p> </div> </div> </div>
        </section>

        <section id="connect">
             <div class="container mx-auto px-6 max-w-xl reveal-up"> 
                 <div class="text-center mb-12 section-header">
                    <h2 class="mb-4">Connect With Us</h2> 
                    <p class="text-xl">Share your thoughts or inquire about partnerships.</p>
                 </div>
                 <form id="contact-form" class="space-y-8 text-left"> 
                     <div> <label for="contact-name" class="block mb-2 font-medium text-medium-text">Your Name</label> <input type="text" name="name" id="contact-name" required class="form-input w-full"> </div> 
                     <div> <label for="contact-email" class="block mb-2 font-medium text-medium-text">Your Email</label> <input type="email" name="email" id="contact-email" required class="form-input w-full"> </div> 
                     <div> <label for="contact-interest" class="block mb-2 font-medium text-medium-text">I am a...</label> <select name="interest" id="contact-interest" class="form-input w-full"> <option>Community Member</option> <option>Potential Partner / Investor</option> <option>Researcher / Institution</option> <option>Student</option> </select> </div> 
                     <div> <label for="contact-message" class="block mb-2 font-medium text-medium-text">Your Message</label> <textarea name="message" id="contact-message" rows="5" required class="form-input w-full"></textarea> </div> 
                     <button type="submit" class="w-full btn-teal font-semibold py-4 px-8 rounded-lg">Send</button> 
                 </form> 
                 <div id="form-success" class="hidden text-center border border-teal rounded-lg p-10 mt-8"> 
                     <h3 class="mb-3 font-script text-teal text-3xl">Thank You!</h3> 
                     <p>Your message has been received. We'll be in touch soon.</p> 
                 </div> 
             </div>
        </section>
    </main>

    <footer id="site-footer"> <div class="container mx-auto px-6"> <p>&copy; 2025 Mehfooz. A digital sanctuary for all.</p> </div> </footer>

<script>
/*
  JAVASCRIPT
  Summary: Re-added intro game logic, connecting it to site entry. Moved bot logic setup to target
  elements within #mehfoozbot-demo. Added nav link for bot section. Fine-tuned animations.
  Ensured correct targets for reveal animations, including #approach content.
*/
document.addEventListener('DOMContentLoaded', function() {
    gsap.registerPlugin(ScrollTrigger, ScrollToPlugin);

    // --- GLOBAL VARS & CHECKS ---
    const mainContent = document.getElementById('main-content');
    const siteHeader = document.getElementById('site-header');
    const loader = document.getElementById('loader');
    const gameScreen = document.getElementById('game-screen'); // Game Screen element
    const cursorDot = document.getElementById('cursor-dot');
    const cursorLight = document.getElementById('cursor-light');
    const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    const isMobile = /Mobi|Android/i.test(navigator.userAgent);
    
    let mouse = {x: window.innerWidth / 2, y: window.innerHeight / 2 };
    let lenis; 

    // --- 1. INTRO GAME & LOADER SEQUENCE ---
    const gameContent = document.getElementById('game-content');
    const gameChoicesContainer = document.getElementById('game-choices');
    const gameFeedbackEl = gameScreen.querySelector('.game-feedback');
    const gameEndScreen = document.getElementById('game-end');
    const enterSiteBtn = document.getElementById('enter-site-btn');

    const gameSteps = [
        { choices: ["A whispered secret", "An open field"], feedback: "Secrets hold allure, yet openness invites connection." },
        { choices: ["Flickering candlelight", "Warm sunlight"], feedback: "Shadows create mystery, while light offers clarity." }
    ];
    let currentGameStep = 0;

    function loadGameStep(stepIndex) {
        const step = gameSteps[stepIndex];
        const tl = gsap.timeline();

        // Use more specific targets within gameContent if needed
        const currentElements = [
             gameContent.querySelector('h2'), 
             gameContent.querySelector('p:not(.game-feedback)'), // Exclude feedback p
             gameChoicesContainer, 
             gameFeedbackEl
        ];

        tl.to(currentElements, { 
            opacity: 0, 
            duration: 0.4, 
            ease: 'power1.in',
            onComplete: () => {
                gameChoicesContainer.innerHTML = ''; 
                gameFeedbackEl.textContent = ''; 
                step.choices.forEach((choiceText, index) => {
                    const button = document.createElement('button');
                    button.className = 'game-choice';
                    button.textContent = choiceText;
                    button.onclick = () => handleGameChoice(index);
                    button.style.opacity = '0'; 
                    gameChoicesContainer.appendChild(button);
                });
                gsap.fromTo(gameChoicesContainer.children, 
                    { opacity: 0, y: 15 }, 
                    { opacity: 1, y: 0, stagger: 0.1, duration: 0.6, ease: 'power2.out', delay: 0.1 }
                );
            }
        });
    }

    function handleGameChoice(choiceIndex) {
        gsap.to(gameChoicesContainer.children, { opacity: 0.5, pointerEvents: 'none', duration: 0.3 });
        const feedback = gameSteps[currentGameStep].feedback;
        gameFeedbackEl.textContent = feedback;
        gsap.fromTo(gameFeedbackEl, {opacity: 0, y: 5}, {opacity: 1, y: 0, duration: 0.6, ease: 'power2.out', delay: 0.2}); 

        setTimeout(() => {
            currentGameStep++;
            if (currentGameStep < gameSteps.length) {
                loadGameStep(currentGameStep);
            } else {
                showGameEnd();
            }
        }, 2800); 
    }

    function showGameEnd() {
        gsap.timeline()
            .to([gameContent, gameFeedbackEl], { opacity: 0, y: -10, duration: 0.5, ease: 'power1.in' })
            .set(gameContent, { display: 'none' }) 
            .set(gameEndScreen, { display: 'block', opacity: 0 }) 
            .to(gameEndScreen, { opacity: 1, duration: 0.1 }) 
            .from(gameEndScreen.children, { opacity: 0, y: 20, stagger: 0.15, duration: 0.8, ease: 'back.out(1.7)' });
    }
    
    function startGame() {
        gsap.set(gameScreen, { opacity: 0 });         
        gsap.to(gameScreen, { 
            opacity: 1, duration: 1.0, ease: 'power1.out', 
            onComplete: () => { loadGameStep(0); }
        });
    }

    enterSiteBtn.addEventListener('click', enterMainSite);

    if (prefersReducedMotion) { 
        gsap.set(gameScreen, { display: 'none' }); 
        gsap.set(loader, { display: 'none' }); 
        gsap.set(mainContent, { opacity: 1 }); 
        gsap.set(siteHeader, { opacity: 1, y: 0 }); 
        document.body.classList.add('site-entered'); 
        setupNavigation(); 
        initSiteAnimations();
    } else {
        startGame(); // Start with the game if motion is OK
    }
    
    function enterMainSite() { 
         gsap.timeline({
            onComplete: () => { gsap.set(gameScreen, { display: 'none' }); document.body.classList.add('site-entered'); setupNavigation(); initSiteAnimations(); }
        })
        .to(gameScreen.querySelector('.game-card').children, { opacity: 0, y: -10, stagger: 0.1, duration: 0.5, ease: 'power1.in' })
        .to(gameScreen, { opacity: 0, duration: 0.8, ease: 'power1.out' }, "-=0.2") 
        .to(siteHeader, { y: 0, opacity: 1, duration: 1.2, ease: 'power2.out' }, "-=0.5") 
        .to(mainContent, { opacity: 1, duration: 1.8, ease: 'power2.out' }, "<"); 
    }

    // --- 2. CURSOR & MOTION INITIALIZATION ---
    if (!prefersReducedMotion) { /* ... Cursor, Lenis, Three.js setup ... */ 
         // Cursor
        window.addEventListener('mousemove', e => { mouse.x = e.clientX; mouse.y = e.clientY; });
        gsap.ticker.add(() => { gsap.to(cursorDot, { duration: 0.3, x: mouse.x, y: mouse.y }); gsap.to(cursorLight, { duration: 0.6, x: mouse.x, y: mouse.y, ease: 'power2.out' }); });
        // Smooth Scroll
        lenis = new Lenis({ lerp: 0.08 }); function raf(time) { lenis.raf(time); requestAnimationFrame(raf); } requestAnimationFrame(raf);
        // Cosmic Background
        try { const scene = new THREE.Scene(); const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000); camera.position.z = 5; const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('bg-canvas'), alpha: true, antialias: true }); renderer.setSize(window.innerWidth, window.innerHeight); renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2)); const particleCount = 7000; const positions = new Float32Array(particleCount * 3); const colors = new Float32Array(particleCount * 3); const colorGold = new THREE.Color(getComputedStyle(document.documentElement).getPropertyValue('--gold').trim()); const colorTeal = new THREE.Color(getComputedStyle(document.documentElement).getPropertyValue('--teal').trim()); const colorViolet = new THREE.Color('#a89fbf'); for(let i = 0; i < particleCount; i++) { const i3 = i * 3; positions[i3] = (Math.random() - 0.5) * 25; positions[i3 + 1] = (Math.random() - 0.5) * 25; positions[i3 + 2] = (Math.random() - 0.5) * 25; let mixedColor; const rand = Math.random(); if (rand > 0.8) { mixedColor = colorGold.clone(); } else if (rand > 0.6) { mixedColor = colorTeal.clone(); } else { mixedColor = colorViolet.clone().lerp(colorGold, Math.random() * 0.4).lerp(colorTeal, Math.random() * 0.2); } colors[i3] = mixedColor.r; colors[i3 + 1] = mixedColor.g; colors[i3 + 2] = mixedColor.b; } const particlesGeometry = new THREE.BufferGeometry(); particlesGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3)); particlesGeometry.setAttribute('color', new THREE.BufferAttribute(colors, 3)); const particlesMaterial = new THREE.PointsMaterial({ size: 0.02, sizeAttenuation: true, transparent: true, opacity: 0.4, vertexColors: true, depthWrite: false }); const particles = new THREE.Points(particlesGeometry, particlesMaterial); scene.add(particles); let clock = new THREE.Clock(); function animateBackground() { const elapsedTime = clock.getElapsedTime(); const scrollY = lenis ? lenis.scroll : window.scrollY; particles.rotation.y = elapsedTime * 0.008 + scrollY * 0.0001; particles.rotation.x = elapsedTime * 0.004 + (mouse.y / window.innerHeight - 0.5) * 0.01; particles.position.y = -scrollY / window.innerHeight * 1.5; renderer.render(scene, camera); requestAnimationFrame(animateBackground); } animateBackground(); window.addEventListener('resize', () => { camera.aspect = window.innerWidth / window.innerHeight; camera.updateProjectionMatrix(); renderer.setSize(window.innerWidth, window.innerHeight); renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2)); }); } catch (e) { console.error("Three.js initialization failed:", e); document.getElementById('bg-canvas').style.display = 'none'; }
    }


    // --- 3. NAVIGATION & SCROLLING ---
    function setupNavigation() { /* ... Navigation setup ... */ 
        // Nav Links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault(); const targetId = this.getAttribute('href'); const targetEl = document.querySelector(targetId); if (!targetEl) return;
                if (prefersReducedMotion || !lenis) { targetEl.scrollIntoView({ behavior: 'auto' }); } 
                else { lenis.scrollTo(targetEl, { offset: 0, duration: 1.2, ease: 'power2.inOut' }); }
            });
        });
        // Header Scroll Effect
        ScrollTrigger.create({ start: 'top top-=-100', end: 99999, toggleClass: { className: 'scrolled', targets: siteHeader } });
        // Nav Link Active State (Targets new #mehfoozbot-demo ID)
        gsap.utils.toArray('main section[id]').forEach((section) => {
            ScrollTrigger.create({ trigger: section, start: 'top center+=150px', end: 'bottom center-=150px', 
                onToggle: self => { const sectionId = section.getAttribute('id'); document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active')); const correspondingLinks = document.querySelectorAll(`.nav-link[href="#${sectionId}"]`); correspondingLinks.forEach(link => { link.classList.toggle('active', self.isActive); }); }
            });
        });
        document.querySelectorAll('.nav-link[href="#home"]').forEach(link => link.classList.add('active'));
    }


    // --- 4. HERO BACKGROUND TOGGLE ---
    const bgToggle = document.getElementById('bg-toggle');
    const homeSection = document.getElementById('home');
    const heroVideo = document.getElementById('hero-video-bg');
    if (bgToggle && homeSection && heroVideo) { /* ... Toggle logic ... */ 
         bgToggle.addEventListener('click', () => { homeSection.classList.toggle('static-bg-active'); if (homeSection.classList.contains('static-bg-active')) { heroVideo.pause(); bgToggle.textContent = "Show Motion"; } else { heroVideo.play().catch(e => console.error("Video play failed:", e)); bgToggle.textContent = "Show Static"; } }); if (isMobile) { homeSection.classList.add('static-bg-active'); heroVideo.pause(); bgToggle.textContent = "Show Motion"; }
    }


    // --- 5. PAGE CONTENT ANIMATIONS ---
    function initSiteAnimations() {
        if (prefersReducedMotion) { /* ... Reduced motion setup ... */ 
            const counter = document.getElementById("user-counter"); if(counter) counter.innerHTML = "100,000+"; 
            gsap.set('.pillar-card, .value-container', { opacity: 1, transform: 'none' }); // Ensure visibility
            return; 
        }

        // Hero Text
        gsap.timeline({ delay: 0.5 }) 
            .from('#hero-headline', { opacity: 0, y: 30, duration: 1.5, ease: 'power3.out' })
            .from('#hero-subheadline', { opacity: 0, y: 30, duration: 1.5, ease: 'power2.out' }, "-=1.0")
            .to('#hero-headline', { scale: 1.01, textShadow: '0 0 25px rgba(255, 200, 128, 0.4)', duration: 3, ease: 'sine.inOut', repeat: -1, yoyo: true }, 0); 

        // Section Reveals (Includes .pillar-card in #approach)
        gsap.utils.toArray('.reveal-up').forEach(elem => {
             // Check if it's a pillar card or value container for specific targeting if needed
             const isPillarCard = elem.classList.contains('pillar-card');
             const isValueContainer = elem.classList.contains('value-container');
            
             gsap.from(elem, { 
                 opacity: 0, 
                 y: isPillarCard || isValueContainer ? 50 : 60, // Slightly less Y offset for cards
                 duration: isPillarCard || isValueContainer ? 1.4 : 1.6, // Slightly faster for cards
                 ease: 'power3.out', 
                 scrollTrigger: { 
                     trigger: elem, 
                     start: 'top 88%', // Adjusted start
                     once: true, 
                     delay: elem.style.getPropertyValue('--gsap-delay') || 0 
                 } 
             });
        });


        // Image Reveals + Parallax
        gsap.utils.toArray('.journal-image-container').forEach(container => { /* ... Parallax logic ... */ 
            gsap.to(container, { clipPath: 'inset(0% 0% 0% 0%)', opacity: 1, transform: 'scale(1)', duration: 2.2, ease: 'power4.out', scrollTrigger: { trigger: container, start: 'top 88%', once: true } });
            const img = container.querySelector('img');
            if (img) { gsap.to(img, { yPercent: -8, ease: 'none', scrollTrigger: { trigger: container, start: 'top bottom', end: 'bottom top', scrub: 1 } }); } 
        });


        // Vision Counter
        gsap.to("#user-counter", { textContent: 100000, duration: 4, ease: "power2.out", snap: { textContent: 1 }, scrollTrigger: { trigger: "#user-counter", start: "top 80%", once: true }, onUpdate: function() { this.targets()[0].innerHTML = Math.ceil(this.targets()[0].textContent).toLocaleString('en-US') + "+"; } });
    }


    // --- 6. MEHFOOZBOT LOGIC (Now targets #mehfoozbot-demo elements) ---
    const botDemoSection = document.getElementById('mehfoozbot-demo');
    if (botDemoSection) {
        const chatLog = botDemoSection.querySelector('#chat-log'); // Target within section
        const chatForm = botDemoSection.querySelector('#chat-form'); // Target within section
        const chatInput = botDemoSection.querySelector('#chat-input'); // Target within section
        const promptButtonsContainer = botDemoSection.querySelector('#prompt-buttons'); // Target within section

        if (chatLog && chatForm && chatInput && promptButtonsContainer) { 
            /* ... Bot setup and logic remains EXACTLY the same as previous version ... */ 
             const botResponses = { "greeting": "Hello. How may I help you find clarity today?", "default": "That's an insightful question. While this demo is brief, the full MehfoozBot explores such topics with care.", "misinformation": "To gently discern misinformation: pause, check the source's origin, seek confirming evidence elsewhere, and notice if the story evokes strong emotions. A calm heart sees clearly.", "safety": "For online safety: use strong, unique passwords (perhaps a manager helps!), enable two-factor authentication where possible, and be mindful before clicking links or sharing personal details.", "story": "Our story began with quiet conversations in Skardu, listening to hopes and worries. The 'Journal' section shares a little more.", "ulema": "We partner with respected local Ulema. They act as trusted guides, blending timeless wisdom with essential digital skills." }; const promptQuestions = { "How does Mehfooz work?": "ulema", "What is your story?": "story", "Discerning fake news?": "misinformation", "Staying safe online?": "safety" }; function getBotResponse(userInput) { const lowerInput = userInput.toLowerCase().trim(); if (promptQuestions[userInput]) { return botResponses[promptQuestions[userInput]]; } if (lowerInput.includes('fake news') || lowerInput.includes('misinformation')) return botResponses.misinformation; if (lowerInput.includes('safe') || lowerInput.includes('security') || lowerInput.includes('password')) return botResponses.safety; if (lowerInput.includes('story') || lowerInput.includes('who are you') || lowerInput.includes('about')) return botResponses.story; if (lowerInput.includes('ulema') || lowerInput.includes('leaders') || lowerInput.includes('work')) return botResponses.ulema; if (lowerInput.includes('hello') || lowerInput.includes('hi') || lowerInput.includes('greeting')) return botResponses.greeting; return botResponses.default; } function addChatMessage(message, sender, isImmediate = false) { const bubble = document.createElement('div'); bubble.className = `chat-bubble ${sender}-bubble`; bubble.textContent = message; chatLog.appendChild(bubble); if (!prefersReducedMotion) { gsap.from(bubble, { opacity: 0, y: 20, duration: 0.8, ease: 'power2.out', delay: isImmediate ? 0 : 0.3 }); gsap.to(chatLog, { duration: 0.8, scrollTo: { y: "max", autoKill: false }, ease: "power2.out" }); } else { chatLog.scrollTop = chatLog.scrollHeight; } } function handleBotUserInput(input) { const trimmedInput = input.trim(); if (trimmedInput) { addChatMessage(trimmedInput, 'user', true); chatInput.value = ""; chatInput.disabled = true; gsap.to(promptButtonsContainer.children, { opacity: 0.5, duration: 0.4, pointerEvents: 'none' }); setTimeout(() => { const response = getBotResponse(trimmedInput); addChatMessage(response, 'bot'); chatInput.disabled = false; gsap.to(promptButtonsContainer.children, { opacity: 1, duration: 0.4, pointerEvents: 'auto' }); chatInput.focus(); }, 1200 + Math.random() * 500); } } chatForm.addEventListener('submit', e => { e.preventDefault(); handleBotUserInput(chatInput.value); }); Object.keys(promptQuestions).forEach(question => { const button = document.createElement('button'); button.type = "button"; button.className = "chat-prompt-btn"; button.textContent = question; button.onclick = () => { handleBotUserInput(question); }; promptButtonsContainer.appendChild(button); }); addChatMessage(botResponses.greeting, 'bot', true);
        } else {
             console.error("Chat elements within #mehfoozbot-demo not found!");
        }
    } else {
         console.error("#mehfoozbot-demo section not found!");
    }


    // --- 7. CONTACT FORM LOGIC ---
    // Targets elements in #connect, text changed to "Send" in HTML
    const contactForm = document.getElementById('contact-form');
    const formSuccess = document.getElementById('form-success');
    if (contactForm && formSuccess) { /* ... Form logic ... */ 
         contactForm.addEventListener('submit', e => { e.preventDefault(); gsap.to(contactForm, { opacity: 0, duration: 0.6, height: 0, ease: 'power1.in', onComplete: () => { contactForm.style.display = 'none'; formSuccess.classList.remove('hidden'); gsap.set(formSuccess, { height: 'auto' }); gsap.from(formSuccess, { opacity: 0, y: 30, duration: 0.8, ease: 'power2.out' }); } }); });
    }

}); // End DOMContentLoaded
</script>

</body>
</html>
